<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.79.1" />


  <title>Some designs have badly posed questions and design diagnosis can alert you to the problem - DeclareDesign</title>




  









<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css'>



<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>

<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>






  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Some designs have badly posed questions and design diagnosis can alert you to the problem">
  <meta name="twitter:description" content='An obvious requirement of a good research design is that the question it seeks to answer does in fact have an answer, at least under plausible models of the world. But we can sometimes get quite far along a research path without being conscious that the questions we ask do not have answers and the answers we get are answering different questions.

'>






<script src="/js/dropdown_menu.js"></script>
<link rel="stylesheet" href="/css/custom.css">

  </head>
  <body>
    <div class="wrapper">
      
        
<header>
  <div class="navbar-wrap fixed-top bg-white">
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container-fluid"> <a class="navbar-brand" href="/"><img src="/images/brand.svg" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="/getting-started.html">Getting Started</a></li>
            <li class="nav-item"><a class="nav-link" href="/r/designlibrary">Library</a></li>
            <li class="nav-item dropdown">
              
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="/r/declaredesign/">DeclareDesign</a></li>
                <li><a class="dropdown-item" href="/r/randomizr/">randomizr</a></li>
                <li><a class="dropdown-item" href="/r/fabricatr/">fabricatr</a></li>
                <li><a class="dropdown-item" href="/r/estimatr/">estimatr</a></li>
                <li><a class="dropdown-item" href="/r/designlibrary/">DesignLibrary</a></li>
              </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="/blog.html">Blog</a></li>
            <li class="nav-item"><a class="nav-link" href="/about.html">About</a></li>
            <li class="nav-item"><a target="_blank" class="nav-link" href="http://discuss.declaredesign.org/">Help</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
</header>

 

      


<main class="container">
  <div class="row justify-content-between">
    <div class="col-lg-12" id="content_column">
      <article class="article">

        <a class="h1 d-block mb-3" href="/blog">DeclareDesign Blog</a>
        <h2 class="article-title">Some designs have badly posed questions and design diagnosis can alert you to the problem</h2>

        
        <span class="article-date">2019/02/12</span>
        

        <div class="article-content">
          


<p>An obvious requirement of a good research design is that the question it seeks to answer does in fact <em>have</em> an answer, at least under plausible models of the world. But we can sometimes get quite far along a research path without being conscious that the questions we ask do not have answers and the answers we get are answering different questions.</p>
<p>How could a question not have an answer? These situations can arise when inquiries depend on variables that do not exist or are undefined for some units. In this post, we’ll look at one way a question might not have an answer, but there are others.</p>
<p>Consider an audit experiment that seeks to assess the effects of an email from a person indicating that they are a Democrat (versus not revealing their party identification) on <em>whether</em> and <em>how well</em> election officials respond to requests for information. Whether or not a response is sent is easily observed and measured. The quality of the response is harder to measure, though some aspects, like the tone of the response, can be measured by human coders or possibly computers if fed enough training data.</p>
<p>More difficult than the measurement problem, though, is the problem of the “tone” of <strong>responses never sent</strong>. Simply dropping such observations is no good, because of the possibility that some officials would have responded in one condition but not in the other. After all, a main purpose of audit experiments is to measure the average effect of treatment on response rates, which requires believing that at least some officials would respond in one condition but not another.</p>
<p>For that kind of subject (so called if-treated or if-untreated responders), the effect of treatment on the tone of their email is <em>undefined</em>. It doesn’t exist. The question, “what is the effect of treatment on tone” has no answer if, in either the treatment or control condition, the subject wouldn’t respond. That question is only well-defined for subjects who always respond, regardless of treatment.</p>
<p>To summarize:</p>
<ul>
<li>If treatment affects whether or not a subject responds, then the treatment effect on tone is undefined.</li>
<li>The average treatment effect (ATE) of treatment on tone is <strong>also</strong> undefined, because that estimand averages over all subjects.</li>
<li>The conditional average treatment effect (CATE) of treatment among “Always-responders” is well-defined.</li>
</ul>
<div id="design-delaration-in-words" class="section level1">
<h1>Design delaration in words</h1>
<p>Here are the key parts of the design:</p>
<ul>
<li><p><strong>M</strong>odel: The model has two outcome variables, <span class="math inline">\(R_i\)</span> and <span class="math inline">\(Y_i\)</span>. <span class="math inline">\(R_i\)</span> stands for “response” and is equal to 1 if a response is sent, and 0 otherwise. <span class="math inline">\(Y_i\)</span> is the tone of the response, which we’ll measure on a 1-7 “friendliness” scale. <span class="math inline">\(Z_i\)</span> is the treatment indicator and equals 1 if the email indicates the sender is a Democrat and 0 otherwise. The table below describes four possible types of subjects who differ in terms of the potential outcomes of <span class="math inline">\(R_i\)</span>.</p>
<ul>
<li>Always-responders (ARs) always respond, regardless of treatment</li>
<li>If-untreated responders (IURs) respond if and only if they are <em>not</em> treated</li>
<li>If-treated responders (ITRs) respond if and only if they are treated<br />
</li>
<li>Never-responders (NRs) never respond, regardless of treatment</li>
</ul></li>
</ul>
<p>The table also includes columns for the potential outcomes of <span class="math inline">\(Y_i\)</span>, showing which potential outcome subjects would express depending on their type. The key thing to note is that for all types except Always-responders, the effect of treatment on <span class="math inline">\(Y_i\)</span> is <em>undefined</em> because messages never sent have no tone.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The last (and very important) feature of our model is that the outcomes <span class="math inline">\(Y_i\)</span> are possibly correlated with subject type. Even though both <span class="math inline">\(E[Y_i(1) | \text{Type} = AR]\)</span> and <span class="math inline">\(E[Y_i(1) | \text{Type} = ITR]\)</span> exist, there’s no reason to expect that they are the same.</p>
<table>
<caption>Causal Types</caption>
<thead>
<tr class="header">
<th>Type</th>
<th><span class="math inline">\(R_i(0)\)</span></th>
<th><span class="math inline">\(R_i(1)\)</span></th>
<th><span class="math inline">\(Y_i(0)\)</span></th>
<th><span class="math inline">\(Y_i(1)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Always-responders (ARs)</td>
<td>1</td>
<td>1</td>
<td><span class="math inline">\(Y_i(0)\)</span></td>
<td><span class="math inline">\(Y_i(1)\)</span></td>
</tr>
<tr class="even">
<td>If-untreated responders (IURs)</td>
<td>1</td>
<td>0</td>
<td><span class="math inline">\(Y_i(0)\)</span></td>
<td>NA</td>
</tr>
<tr class="odd">
<td>If-treated responders (ITRs)</td>
<td>0</td>
<td>1</td>
<td>NA</td>
<td><span class="math inline">\(Y_i(1)\)</span></td>
</tr>
<tr class="even">
<td>Never-responders (NRs)</td>
<td>0</td>
<td>0</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>I</strong>nquiry: We have two inquiries. The first is straightforward: <span class="math inline">\(E[R_i(1) - R_i(0)]\)</span> is the Average Treatment Effect on response. The second inquiry is the undefined inquiry that does not have an answer: <span class="math inline">\(E[Y_i(1) - Y_i(0)]\)</span>. We will also consider a third inquiry, which <em>is</em> defined: <span class="math inline">\(E[Y_i(1) - Y_i(0) | \text{Type} = AR]\)</span>, which is the average effect of treatment on tone among Always-Responders.</li>
<li><strong>D</strong>ata strategy: The data strategy will be to use complete random assignment to assign 250 of 500 units to treatment.</li>
<li><strong>A</strong>nswer strategy: We’ll try to answer all three inquiries with the difference-in-means estimator.</li>
</ul>
<p>This design can be declared formally like this:</p>
<pre class="r"><code>design &lt;-
# M: Model ----------------------------------------------------------------
  declare_population(
    N = 500,
    noise = rnorm(N),
    type = sample(1:4, N, replace = TRUE),
    AR = type == 1,
    IUR = type == 2,
    ITR = type == 3,
    NR = type == 4
  ) +
  
  declare_potential_outcomes(
    # AR and IUR types report in the control condition
    R_Z_0 = AR | IUR,
    # R and ITR types report in the treatment condition
    R_Z_1 = AR | ITR,
    # In control, ARs and IURs have different outcomes
    Y_Z_0 = ifelse(R_Z_0, as.numeric(draw_likert(-0.50 * IUR + noise)), NA),
    # In treatment, ARs and ITRs have different outcomes, and AR outcomes are higher
    Y_Z_1 = ifelse(R_Z_1, as.numeric(draw_likert(-0.25 * ITR + noise + 0.25)), NA)
  ) +
  
# I: Inquiry --------------------------------------------------------------
  declare_estimand(
    ATE_R = mean(R_Z_1 - R_Z_0),
    ATE_Y = mean(Y_Z_1 - Y_Z_0),
    CATE_Y_AR = mean(Y_Z_1[AR] - Y_Z_0[AR])
  ) +
  
# D: Data Strategy --------------------------------------------------------
  declare_assignment(prob = 0.5) +
  declare_reveal(outcome_variables = c(&quot;R&quot;, &quot;Y&quot;)) +
# Answer Strategy ---------------------------------------------------------
  declare_estimator(R ~ Z, estimand = &quot;ATE_R&quot;, label = &quot;DIM_R&quot;) +
  declare_estimator(
    Y ~ Z, estimand = list(&quot;ATE_Y&quot;, &quot;CATE_Y_AR&quot;), label = &quot;DIM_Y&quot;)</code></pre>
</div>
<div id="simulations" class="section level1">
<h1>Simulations</h1>
<p>Here we simulate the design, diagnose, and plot the resulting output.</p>
<pre class="r"><code>simulations &lt;- simulate_design(design, sims = sims)</code></pre>
<p><img src="/blog/2019-02-12-bad-questions_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<table>
<colgroup>
<col width="12%" />
<col width="14%" />
<col width="14%" />
<col width="4%" />
<col width="6%" />
<col width="13%" />
<col width="13%" />
<col width="6%" />
<col width="8%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Design Label</th>
<th align="left">Estimand Label</th>
<th align="left">Estimator Label</th>
<th align="left">Term</th>
<th align="left">N Sims</th>
<th align="left">Mean Estimate</th>
<th align="left">Mean Estimand</th>
<th align="left">Bias</th>
<th align="left">Coverage</th>
<th align="left">Power</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">design</td>
<td align="left">ATE_R</td>
<td align="left">DIM_R</td>
<td align="left">Z</td>
<td align="left">500</td>
<td align="left">0.00</td>
<td align="left">0.00</td>
<td align="left">0.00</td>
<td align="left">1.00</td>
<td align="left">0.07</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.01)</td>
</tr>
<tr class="odd">
<td align="left">design</td>
<td align="left">ATE_Y</td>
<td align="left">DIM_Y</td>
<td align="left">Z</td>
<td align="left">500</td>
<td align="left">0.36</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">0.76</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">(0.01)</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">(0.02)</td>
</tr>
<tr class="odd">
<td align="left">design</td>
<td align="left">CATE_Y_AR</td>
<td align="left">DIM_Y</td>
<td align="left">Z</td>
<td align="left">500</td>
<td align="left">0.36</td>
<td align="left">0.25</td>
<td align="left">0.11</td>
<td align="left">0.86</td>
<td align="left">0.76</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">(0.01)</td>
<td align="left">(0.00)</td>
<td align="left">(0.01)</td>
<td align="left">(0.02)</td>
<td align="left">(0.02)</td>
</tr>
</tbody>
</table>
<p>We learn three things from the design diagnosis.</p>
<ul>
<li>First, as expected, our experiment is unbiased for the average treatment effect on response (<code>ATE_R</code>)</li>
<li>Second, our second inquiry (<code>ATE_Y</code>), as well as our diagnostics for it, are undefined. The diagnosis tells us that our definition of potential outcomes produces a definition problem for the estimand. Note that some diagnosands are defined, including power, but none of the diagnosands that depend on the value of the estimand (bias, coverage, rmse) can be calculated.</li>
<li>The third estimand (<code>CATE_Y_AR</code>) <em>is</em> defined but the estimator is biased. The reason is that we cannot tell from the data which types are the <span class="math inline">\(AR\)</span> types; we are not conditioning on the correct subset. Indeed, we are unable to do so. If a subject responds in the treatment group, we don’t know if she is a <span class="math inline">\(AR\)</span> or a <span class="math inline">\(ITR\)</span> type; in the control group, we can’t tell if a responder is an <span class="math inline">\(AR\)</span> or an <span class="math inline">\(IUR\)</span> type. Our difference-in-means estimator of the CATE on <span class="math inline">\(Y\)</span> among <span class="math inline">\(AR\)</span>s will be off whenever <span class="math inline">\(AR\)</span>s have different outcomes from <span class="math inline">\(ITR\)</span>s and <span class="math inline">\(IUR\)</span>s.</li>
</ul>
<p>There are some solutions to this problem. In some cases, the problem might be resolved by changing the inquiry. Closely related estimands can often be defined, perhaps by redefining <span class="math inline">\(Y\)</span> (e.g., emails never sent have a tone of zero). See <span class="citation">Coppock (2019)</span> for a more detailed discussion of solutions that may work for different research scenarios.</p>
</div>
<div id="other-instances-of-this-problem" class="section level1">
<h1>Other instances of this problem</h1>
<p>This kind of problem is surprisingly common. Consider the instances below:</p>
<ol style="list-style-type: decimal">
<li><p><span class="math inline">\(Y\)</span> is the decision to vote Democrat (<span class="math inline">\(Y=1\)</span>) or Republican (<span class="math inline">\(Y=0\)</span>), <span class="math inline">\(R\)</span> is the decision to turn out to vote and <span class="math inline">\(Z\)</span> is a campaign message. The decision to vote may depend on treatment but if subjects do not vote then <span class="math inline">\(Y\)</span> is undefined.</p></li>
<li><p><span class="math inline">\(Y\)</span> is the weight of infants, <span class="math inline">\(R\)</span> is whether a child is born and <span class="math inline">\(Z\)</span> is a maternal health intervention. Fertility may depend on treatment but the weight of unborn (possibly never conceived) babies is not defined.</p></li>
<li><p><span class="math inline">\(Y\)</span> is the charity to whom contributions are made during fundraising and <span class="math inline">\(R\)</span> is whether anything is contributed and <span class="math inline">\(Z\)</span> is an encouragement to contribute. The identity of beneficiaries is not defined if there are no contributions.</p></li>
</ol>
<p>All of these examples exhibit a form of post-treatment bias but the issue goes beyond picking the right estimator. Our problem here is conceptual: the effect of treatment on the outcome just doesn’t exist for some subjects. This means that design that is not “diagnosand-complete” in the sense we discuss in <a href="https://declaredesign.org/declare.pdf">this paper</a>. But interestingly, we think, the incompleteness is not obvious. You could implement the design and do your analysis on the data from this design without realizing that the estimand is badly defined. Declaration and diagnosis can alert you to the problem.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-coppock2019audit">
<p>Coppock, Alexander. 2019. “Avoiding Post-Treatment Bias in Audit Experiments.” <em>Journal of Experimental Political Science</em> 6 (1): 1–4.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>This can of course be avoided if one is willing to speculate on what tone would be were a response given in a treatment condition by an individual who would not respond in that condition.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

        </div>
      </article>
      



    </div>
  </div>
</main>

    </div>

    

<footer>
    <div class="footer-top">
      <div class="container">
        <div class="row no-gutters">
          <div class="col-lg-7 col-md-12">
            <div class="row">
              <div class="col-md-3 col-12">
                <div class="footer-brand"><a href=""><img src="/images/brand-footer.svg" alt=""></a></div>
              </div>
              <div class="col-md-3 col-4">
                <p>DeclareDesign</p>
                <ul class="list-unstyled">
                  <li><a href="/">Home</a></li>
                  <li><a href="/about.html">About</a></li>
                  <li><a href="/r/designlibrary">Library</a></li>
                  <li><a href="/blog.html">Blog</a></li>
                  <li><a href="http://discuss.declaredesign.org/">Help</a></li>
                </ul>
              </div>
              <div class="col-md-3 col-4">
                <p>Software</p>
                <ul class="list-unstyled">
                  <li><a href="/r/declaredesign/">DeclareDesign</a></li>
                  <li><a href="/r/estimatr/">estimatr</a></li>
                  <li><a href="/r/randomizr/">randomizr</a></li>
                  <li><a href="/r/fabricatr/">fabricatr</a></li>
                  <li><a href="/r/designlibrary/">DesignLibrary</a></li>
                </ul>
              </div>
              
            </div>
          </div>
          <div class="col-lg-5 col-md-12"></div>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-meta-block">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-sm-7">
              <p class="mb-0">&copy; 2021 Graeme Blair, Jasper Cooper, Alexander Coppock, and Macartan Humphreys</p>
            </div>
            <div class="col-sm-5">
              <div class="fbl-link-wrap">
                <ul class="list-inline mb-0">
                  <li class="list-inline-item"> <a target="_blank" href="http://github.com/DeclareDesign/"><img src="images/icon-git.svg" alt=""></a> </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  
   
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.css"/>
<script src="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js"></script>

<script>
    jQuery(function ()
    {
        const library_list = jQuery("#design_library_list");
        library_list.addClass("table table-striped table-bordered");
        library_list.DataTable(
            {
                "autoWidth": false,
                "columns":
                    [
                        {"width": "30%"}, 
                        {"width": "10%"}, 
                        {"width": "10%"}, 
                        {"width": "10%"}, 
                        {"width": "15%"}, 
                        {"width": "25%"}, 
                    ],
                "drawCallback": initialize_tooltips
            }
        );

        library_list.css("width", "");
    });

    function initialize_tooltips()
    {
        const tooltip_elements = jQuery('[data-toggle="tooltip"]');
        tooltip_elements.tooltip();
        tooltip_elements.click(function ()
        {
            jQuery(this).tooltip("hide");
        });
    }
</script>

    


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>
jQuery(function ()
{
  $('pre').each(function (index)
  {
    hljs.highlightBlock(this);
  });
});
</script>



    
<script src="/js/math-code.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    



    
  </body>
</html>

