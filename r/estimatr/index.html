<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Declare and Diagnose Research Designs • DeclareDesign</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Declare and Diagnose Research Designs">
<meta property="og:description" content="Researchers can characterize and learn about the properties of
    research designs before implementation using `DeclareDesign`. Ex ante
    declaration and diagnosis of designs can help researchers clarify the 
    strengths and limitations of their designs and to improve their 
    properties, and can help readers evaluate a research strategy prior
    to implementation and without access to results. It can also make it
    easier for designs to be shared, replicated, and critiqued.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">DeclareDesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.25.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/custom_functions.html">Custom functions and DeclareDesign</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DeclareDesign/DeclareDesign/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="declaredesign-declare-and-diagnose-research-designs" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#declaredesign-declare-and-diagnose-research-designs" class="anchor"></a>DeclareDesign: Declare and Diagnose Research Designs</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->

<p>DeclareDesign is a system for describing research designs in code and simulating them in order to understand their properties. Because DeclareDesign employs a consistent grammar of designs, you can focus on the intellectually challenging part – designing good research studies – without having to code up simulations from scratch.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install the latest stable release of <strong>DeclareDesign</strong>, please ensure that you are running version 3.5 or later of R and run the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DeclareDesign"</span><span class="op">)</span></code></pre></div>
<p>To install the latest development release of all of the packages, please ensure that you are running version 3.5 or later of R and run the following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DeclareDesign"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span>,
                 repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"http://R.declaredesign.org"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Designs are declared by adding together design elements. Here’s a minimal example that describes a 100 unit randomized controlled trial with a binary outcome. Half the units are assigned to treatment and the remainder to control. The true value of the average treatment effect is 0.05 and it will be estimated with the difference-in-means estimator. The diagnosis shows that the study is unbiased but underpowered.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://declaredesign.org">DeclareDesign</a></span><span class="op">)</span>

<span class="va">design</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/declare_population.html">declare_population</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="reference/declare_potential_outcomes.html">declare_potential_outcomes</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.5</span> <span class="op">+</span> <span class="fl">0.05</span> <span class="op">*</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="reference/declare_estimand.html">declare_estimand</a></span><span class="op">(</span>ATE <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="reference/declare_assignment.html">declare_assignment</a></span><span class="op">(</span>m <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="reference/declare_estimator.html">declare_estimator</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span>

<span class="va">diagnosis</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/diagnose_design.html">diagnose_design</a></span><span class="op">(</span><span class="va">design</span>, diagnosands <span class="op">=</span> <span class="fu"><a href="reference/diagnosand_handler.html">declare_diagnosands</a></span><span class="op">(</span>select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"power"</span>, <span class="st">"bias"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">diagnosis</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">## </span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">## Research design diagnosis based on 500 simulations. Diagnosand estimates with bootstrapped standard errors in parentheses (100 replicates).</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">## </span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">##  Design Label Estimand Label Estimator Label Term N Sims  Power   Bias</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">##        design            ATE       estimator    Z    500   0.08  -0.00</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">##                                                          (0.01) (0.00)</span></span></code></pre></div>
</div>
<div id="companion-software" class="section level2">
<h2 class="hasAnchor">
<a href="#companion-software" class="anchor"></a>Companion software</h2>
<p>The core DeclareDesign package relies on four companion packages, each of which is useful in its own right.</p>
<ol>
<li>
<a href="https://declaredesign.org/r/randomizr/">randomizr</a>: Easy to use tools for common forms of random assignment and sampling.</li>
<li>
<a href="https://declaredesign.org/r/fabricatr/">fabricatr</a>: Imagine your data before you collect it.</li>
<li>
<a href="https://declaredesign.org/r/estimatr/">estimatr</a>: Fast estimators for social scientists.</li>
<li>
<a href="https://declaredesign.org/library">DesignLibrary</a>: Templates to quickly adopt and adapt common research designs.</li>
</ol>
</div>
<div id="learning-declaredesign" class="section level2">
<h2 class="hasAnchor">
<a href="#learning-declaredesign" class="anchor"></a>Learning DeclareDesign</h2>
<ol>
<li><p>To get started, have a look at this vignette on <a href="https://declaredesign.org/idea/">the idea behind DeclareDesign</a>, which covers the main functionality of the software.</p></li>
<li><p>You can also browse a <a href="https://declaredesign.org/library/">library</a> of already declared designs, which relies on the <code>DesignLibrary</code> package. The library includes canonical designs that you can download, modify, and deploy.</p></li>
<li><p>A fuller description of the philosophy underlying the software is described in this <a href="https://declaredesign.org/declare.pdf">working paper</a>.</p></li>
</ol>
</div>
<div id="package-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#package-structure" class="anchor"></a>Package structure</h2>
<p>Each of these <code>declare_*()</code> functions returns a <em>function</em>.</p>
<ol>
<li>
<code><a href="reference/declare_population.html">declare_population()</a></code> (describes dimensions and distributions over the variables in the population)</li>
<li>
<code><a href="reference/declare_potential_outcomes.html">declare_potential_outcomes()</a></code> (takes population or sample and adds potential outcomes produced by interventions)</li>
<li>
<code><a href="reference/declare_sampling.html">declare_sampling()</a></code> (takes a population and selects a sample)</li>
<li>
<code><a href="reference/declare_assignment.html">declare_assignment()</a></code> (takes a population or sample and adds treatment assignments)</li>
<li>
<code><a href="reference/declare_estimand.html">declare_estimand()</a></code> (takes potential outcomes and calculates a quantity of interest)</li>
<li>
<code><a href="reference/declare_estimator.html">declare_estimator()</a></code> (takes data produced by sampling and assignment and returns estimates)</li>
</ol>
<p>To <em>declare a design</em>, connect the components of your design with the + operator.</p>
<p>Once you have declared your design, there are four core post-design-declaration commands used to modify or diagnose your design:</p>
<ol>
<li>
<code><a href="reference/diagnose_design.html">diagnose_design()</a></code> (takes a design, returns simulations and diagnosis)</li>
<li>
<code><a href="reference/draw_functions.html">draw_data()</a></code> (takes a design and returns a single draw of the data)</li>
<li>
<code><a href="reference/draw_functions.html">draw_estimates()</a></code> (takes a design a returns a single simulation of estimates)</li>
<li>
<code><a href="reference/draw_functions.html">draw_estimands()</a></code> (takes a design a returns a single simulation of estimands)</li>
</ol>
<p>A few other features:</p>
<ol>
<li>A designer is a function that takes parameters (e.g., <code>N</code>) and returns a design. <code><a href="reference/expand_design.html">expand_design()</a></code> is a function of a designer and parameters that returns a design.</li>
<li>You can change the features of the design to be diagnosed with <code><a href="reference/diagnosand_handler.html">declare_diagnosands()</a></code>.</li>
<li>
<code><a href="reference/reveal_outcomes.html">reveal_outcomes()</a></code> implements a general switching equation, which allows you to reveal outcomes from potential outcomes and a treatment assignment.</li>
<li>You can provide custom functions to any <code>declare_*</code> step, as described in the <a href="/r/declaredesign/articles/custom_functions.html">custom functions vignette</a>.</li>
</ol>
<hr>
<p>This project is generously supported by a grant from the <a href="http://www.arnoldfoundation.org">Laura and John Arnold Foundation</a> and seed funding from <a href="http://egap.org">EGAP</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=DeclareDesign">https://​cloud.r-project.org/​package=DeclareDesign</a>
</li>
<li>Browse source code at <br><a href="https://github.com/DeclareDesign/DeclareDesign/">https://​github.com/​DeclareDesign/​DeclareDesign/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/DeclareDesign/DeclareDesign/issues">https://​github.com/​DeclareDesign/​DeclareDesign/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing DeclareDesign</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Graeme Blair <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9164-2102" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jasper Cooper <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8639-3188" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Alexander Coppock <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5733-2386" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Macartan Humphreys <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7029-2326" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Neal Fultz <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=DeclareDesign"><img src="https://www.r-pkg.org/badges/version/DeclareDesign" alt="CRAN Status"></a></li>
<li><a href="https://travis-ci.org/DeclareDesign/DeclareDesign"><img src="https://travis-ci.org/DeclareDesign/DeclareDesign.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/DeclareDesign/DeclareDesign"><img src="https://ci.appveyor.com/api/projects/status/github/DeclareDesign/DeclareDesign?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://coveralls.io/github/DeclareDesign/DeclareDesign?branch=master"><img src="https://coveralls.io/repos/github/DeclareDesign/DeclareDesign/badge.svg?branch=master" alt="Coverage Status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Neal Fultz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
