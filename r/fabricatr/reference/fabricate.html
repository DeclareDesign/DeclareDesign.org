<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fabricate data — fabricate • fabricatr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fabricate data — fabricate" />
<meta property="og:description" content="fabricate helps you simulate a dataset before you collect it. You can
either start with your own data and add simulated variables to it (by passing
data to fabricate()) or start from scratch by defining
N. Create hierarchical data with multiple levels of data such as
citizens within cities within states using add_level() or modify
existing hierarchical data using modify_level(). You can use any R
function to create each variable. Use cross_levels() and
link_levels() to make more complex designs such as panel or
cross-classified data." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="https://declaredesign.org"><img height = 125% src = "https://declaredesign.org/images/brand.svg"></a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Software
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/randomizr/">randomizr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/estimatr/">estimatr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/getting_started.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/getting_started.html">Getting started with fabricatr</a>
    </li>
    <li>
      <a href="../articles/building_importing.html">Building and Importing Data</a>
    </li>
    <li>
      <a href="../articles/common_social.html">Common Social Science variables</a>
    </li>
    <li>
      <a href="../articles/cross_classified.html">Panel and Cross-classified data</a>
    </li>
    <li>
      <a href="../articles/resampling.html">Resampling data with fabricatr</a>
    </li>
    <li>
      <a href="../articles/time_series.html">Time series data with fabricatr</a>
    </li>
    <li>
      <a href="../articles/variable_generation.html">Generating discrete random variables with fabricatr</a>
    </li>
    <li>
      <a href="../articles/other_packages.html">Using other data generating packages with fabricatr</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced features</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://declaredesign.org/r/fabricatr/">fabricatr home</a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->




      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fabricate data</h1>
    <small class="dont-index">Source: <a href='https://github.com/DeclareDesign/fabricatr/blob/master/R/aaa_fabricate.R'><code>R/aaa_fabricate.R</code></a>, <a href='https://github.com/DeclareDesign/fabricatr/blob/master/R/add_level.R'><code>R/add_level.R</code></a>, <a href='https://github.com/DeclareDesign/fabricatr/blob/master/R/modify_level.R'><code>R/modify_level.R</code></a>, and 1 more</small>
    <div class="hidden name"><code>fabricate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>fabricate</code> helps you simulate a dataset before you collect it. You can
either start with your own data and add simulated variables to it (by passing
<code>data</code> to <code>fabricate()</code>) or start from scratch by defining
<code>N</code>. Create hierarchical data with multiple levels of data such as
citizens within cities within states using <code>add_level()</code> or modify
existing hierarchical data using <code>modify_level()</code>. You can use any R
function to create each variable. Use <code><a href='cross_levels.html'>cross_levels()</a></code> and
<code><a href='cross_levels.html'>link_levels()</a></code> to make more complex designs such as panel or
cross-classified data.</p>
    </div>

    <pre class="usage"><span class='fu'>fabricate</span><span class='op'>(</span><span class='va'>...</span>, data <span class='op'>=</span> <span class='cn'>NULL</span>, N <span class='op'>=</span> <span class='cn'>NULL</span>, ID_label <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span>, nest <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>modify_level</span><span class='op'>(</span><span class='va'>...</span>, by <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>nest_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Variable or level-generating arguments, such as
<code>my_var = rnorm(N)</code>. For <code>fabricate</code>, you may also pass
<code>add_level()</code> or <code>modify_level()</code> arguments, which define a level
of a multi-level dataset. See examples.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>(optional) user-provided data that forms the basis of the
fabrication, e.g. you can add variables to existing data. Provide either
<code>N</code> or <code>data</code> (<code>N</code> is the number of rows of the data if
<code>data</code> is provided). If <code>data</code> and <code>N</code> are not provided,
fabricatr will try to interpret the first un-named argument as either <code>data</code>
or <code>N</code> based on type.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>(optional) number of units to draw. If provided as
<code>fabricate(N = 5)</code>, this determines the number of units in the
single-level data. If provided in <code>add_level</code>, e.g.
<code>fabricate(cities = add_level(N = 5))</code>, <code>N</code> determines the number
of units in a specific level of a hierarchical dataset.</p></td>
    </tr>
    <tr>
      <th>ID_label</th>
      <td><p>(optional) variable name for ID variable, e.g. citizen_ID. Set to NA to suppress the creation of an ID variable.</p></td>
    </tr>
    <tr>
      <th>nest</th>
      <td><p>(Default TRUE) Boolean determining whether data in an
<code>add_level()</code> call will be nested under the current working data frame
or create a separate hierarchy of levels. See our vignette for
cross-classified, non-nested data for details.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>(optional) quoted name of variable <code>modify_level</code> uses to split-modify-combine data by.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data.frame</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>We also provide several built-in options to easily create variables, including
<code><a href='draw_discrete.html'>draw_binary</a></code>, <code><a href='draw_discrete.html'>draw_count</a></code>, <code><a href='draw_discrete.html'>draw_likert</a></code>,
and intra-cluster correlated variables <code><a href='draw_binary_icc.html'>draw_binary_icc</a></code> and
<code><a href='draw_normal_icc.html'>draw_normal_icc</a></code></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='cross_levels.html'>link_levels</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

<span class='co'># Draw a single-level dataset with a covariate</span>
<span class='va'>building_df</span> <span class='op'>&lt;-</span> <span class='fu'>fabricate</span><span class='op'>(</span>
  N <span class='op'>=</span> <span class='fl'>100</span>,
  height_ft <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>300</span>, <span class='fl'>800</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>building_df</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    ID height_ft
#&gt; 1 001  544.2171
#&gt; 2 002  659.9207
#&gt; 3 003  737.1589
#&gt; 4 004  730.2748
#&gt; 5 005  622.8225
#&gt; 6 006  682.1437</div><div class='input'>
<span class='co'># Start with existing data instead</span>
<span class='va'>building_modified</span> <span class='op'>&lt;-</span> <span class='fu'>fabricate</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>building_df</span>,
  rent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span>, mean <span class='op'>=</span> <span class='va'>height_ft</span> <span class='op'>*</span> <span class='fl'>100</span>, sd <span class='op'>=</span> <span class='va'>height_ft</span> <span class='op'>*</span> <span class='fl'>30</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># Draw a two-level hierarchical dataset</span>
<span class='co'># containing cities within regions</span>
<span class='va'>multi_level_df</span> <span class='op'>&lt;-</span> <span class='fu'>fabricate</span><span class='op'>(</span>
 regions <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>,
 cities <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>2</span>, pollution <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span>, mean <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>multi_level_df</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   regions cities pollution
#&gt; 1       1     01  5.495848
#&gt; 2       1     02  6.299751
#&gt; 3       2     03  3.384014
#&gt; 4       2     04  3.749632
#&gt; 5       3     05  6.582132
#&gt; 6       3     06  6.252529</div><div class='input'>
<span class='co'># Start with existing data and add a nested level:</span>
<span class='va'>company_df</span> <span class='op'>&lt;-</span> <span class='fu'>fabricate</span><span class='op'>(</span>
 data <span class='op'>=</span> <span class='va'>building_df</span>,
 company_id <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N<span class='op'>=</span><span class='fl'>10</span>, is_headquarters <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>, <span class='va'>N</span>, replace<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># Start with existing data and add variables to hierarchical data</span>
<span class='co'># at levels which are already present in the existing data.</span>
<span class='co'># Note: do not provide N when adding variables to an existing level</span>
<span class='fu'>fabricate</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>multi_level_df</span>,
  regions <span class='op'>=</span> <span class='fu'>modify_level</span><span class='op'>(</span>watershed <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>, <span class='va'>N</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>,
  cities <span class='op'>=</span> <span class='fu'>modify_level</span><span class='op'>(</span>runoff <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;    regions cities pollution watershed     runoff
#&gt; 1        1     01  5.495848         0 -0.6614365
#&gt; 2        1     02  6.299751         1  1.3385867
#&gt; 3        2     03  3.384014         1 -1.1178179
#&gt; 4        2     04  3.749632         0  0.6847335
#&gt; 5        3     05  6.582132         1 -0.6105563
#&gt; 6        3     06  6.252529         0 -0.3493068
#&gt; 7        4     07  4.790604         1  1.1339693
#&gt; 8        4     08  4.360966         1  1.5337566
#&gt; 9        5     09  5.398903         1  1.1066693
#&gt; 10       5     10  6.341974         1  0.3440617</div><div class='input'>
<span class='co'># fabricatr can add variables that are higher-level summaries of lower-level</span>
<span class='co'># variables via a split-modify-combine logic and the \code{by} argument</span>

<span class='va'>multi_level_df</span> <span class='op'>&lt;-</span>
 <span class='fu'>fabricate</span><span class='op'>(</span>
   regions <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>5</span>, elevation <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>,
   cities <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>2</span>, pollution <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span>, mean <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>,
   cities <span class='op'>=</span> <span class='fu'>modify_level</span><span class='op'>(</span>by <span class='op'>=</span> <span class='st'>"regions"</span>, regional_pollution <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>pollution</span><span class='op'>)</span><span class='op'>)</span>
 <span class='op'>)</span>

<span class='co'># fabricatr can also make panel or cross-classified data. For more</span>
<span class='co'># information about syntax for this functionality please read our vignette</span>
<span class='co'># or check documentation for \code{link_levels}:</span>
<span class='va'>cross_classified</span> <span class='op'>&lt;-</span> <span class='fu'>fabricate</span><span class='op'>(</span>
  primary_schools <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>50</span>, ps_quality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
  secondary_schools <span class='op'>=</span> <span class='fu'>add_level</span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>100</span>, ss_quality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span>, nest<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>,
  students <span class='op'>=</span> <span class='fu'><a href='cross_levels.html'>link_levels</a></span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>2000</span>,
                          by<span class='op'>=</span><span class='fu'><a href='join.html'>join</a></span><span class='op'>(</span><span class='va'>ps_quality</span>, <span class='va'>ss_quality</span>, rho <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
                          student_quality <span class='op'>=</span> <span class='va'>ps_quality</span> <span class='op'>+</span> <span class='fl'>3</span><span class='op'>*</span><span class='va'>ss_quality</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Aaron Rudkin, Neal Fultz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


