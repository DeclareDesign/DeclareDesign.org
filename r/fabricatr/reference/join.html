<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Helper function handling specification of which variables to join a
cross-classified data on, and what kind of correlation structure needed.
Correlation structures can only be provided if the underlying call is
a link_levels() call. — join • fabricatr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Helper function handling specification of which variables to join a
cross-classified data on, and what kind of correlation structure needed.
Correlation structures can only be provided if the underlying call is
a link_levels() call. — join" />
<meta property="og:description" content="Helper function handling specification of which variables to join a
cross-classified data on, and what kind of correlation structure needed.
Correlation structures can only be provided if the underlying call is
a link_levels() call." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="https://declaredesign.org"><img height = 125% width = 125% src = "https://declaredesign.org/images/brand.svg"></a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Software
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/randomizr/">randomizr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/estimatr/">estimatr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://declaredesign.org/r/fabricatr/">fabricatr home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../getting_started.html">Getting started with fabricatr</a>
    </li>
    <li>
      <a href="../building_importing.html">Building and Importing Data</a>
    </li>
    <li>
      <a href="../common_social.html">Common Social Science variables</a>
    </li>
    <li>
      <a href="../cross_classified.html">Panel and Cross-classified data</a>
    </li>
    <li>
      <a href="../resampling.html">Resampling data with fabricatr</a>
    </li>
    <li>
      <a href="../time_series.html">Time series data with fabricatr</a>
    </li>
    <li>
      <a href="../variable_generation.html">Generating discrete random variables with fabricatr</a>
    </li>
    <li>
      <a href="../other_packages.html">Using other data generating packages with fabricatr</a>
    </li>
    <li>
      <a href="../advanced_features.html">Advanced features</a>
    </li>
  </ul>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Helper function handling specification of which variables to join a
cross-classified data on, and what kind of correlation structure needed.
Correlation structures can only be provided if the underlying call is
a <code>link_levels()</code> call.</h1>
    <small class="dont-index">Source: <a href='https://github.com/DeclareDesign/fabricatr/blob/master/R/cross_levels.R'><code>R/cross_levels.R</code></a></small>
    <div class="hidden name"><code>join.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Helper function handling specification of which variables to join a
cross-classified data on, and what kind of correlation structure needed.
Correlation structures can only be provided if the underlying call is
a <code><a href='cross_levels.html'>link_levels()</a></code> call.</p>
    </div>

    <pre class="usage"><span class='fu'>join</span><span class='op'>(</span><span class='va'>...</span>, rho <span class='op'>=</span> <span class='fl'>0</span>, sigma <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>A series of two or more variable names, unquoted, to join on in
order to create cross-classified data.</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>A fixed (Spearman's rank) correlation coefficient between the
variables being joined on: note that if it is not possible to make a
correlation matrix from this coefficient (e.g. if you are joining on three
or more variables and rho is negative) then the <code><a href='cross_levels.html'>cross_levels()</a></code> call
will fail. Do not provide <code>rho</code> if making panel data.</p></td>
    </tr>
    <tr>
      <th>sigma</th>
      <td><p>A matrix with dimensions equal to the number of variables you
are joining on, specifying the correlation for the resulting joined data.
Only one of rho and sigma should be provided. Do not provide <code>sigma</code> if
making panel data.</p></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>panels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fabricate.html'>fabricate</a></span><span class='op'>(</span>
  countries <span class='op'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>150</span>, country_fe <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
  years <span class='op'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>25</span>, year_shock <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span>, nest <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>,
  obs <span class='op'>=</span> <span class='fu'><a href='cross_levels.html'>cross_levels</a></span><span class='op'>(</span>
    by <span class='op'>=</span> <span class='fu'>join</span><span class='op'>(</span><span class='va'>countries</span>, <span class='va'>years</span><span class='op'>)</span>,
    new_variable <span class='op'>=</span> <span class='va'>country_fe</span> <span class='op'>+</span> <span class='va'>year_shock</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>0</span>, <span class='fl'>2</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>schools_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fabricate.html'>fabricate</a></span><span class='op'>(</span>
  primary_schools <span class='op'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span><span class='op'>(</span>N <span class='op'>=</span> <span class='fl'>20</span>, ps_quality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
  secondary_schools <span class='op'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span><span class='op'>(</span>
    N <span class='op'>=</span> <span class='fl'>15</span>,
    ss_quality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span>,
    nest <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>,
  students <span class='op'>=</span> <span class='fu'><a href='cross_levels.html'>link_levels</a></span><span class='op'>(</span>
    N <span class='op'>=</span> <span class='fl'>1500</span>,
    by <span class='op'>=</span> <span class='fu'>join</span><span class='op'>(</span><span class='va'>primary_schools</span>, <span class='va'>secondary_schools</span><span class='op'>)</span>,
    SAT_score <span class='op'>=</span> <span class='fl'>800</span> <span class='op'>+</span> <span class='fl'>13</span> <span class='op'>*</span> <span class='va'>ps_quality</span> <span class='op'>+</span> <span class='fl'>26</span> <span class='op'>*</span> <span class='va'>ss_quality</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>N</span>, <span class='fl'>0</span>, <span class='fl'>50</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Aaron Rudkin, Neal Fultz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


