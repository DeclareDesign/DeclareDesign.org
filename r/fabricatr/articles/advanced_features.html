<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced features • fabricatr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Advanced features">
<meta property="og:description" content="fabricatr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="https://declaredesign.org"><img height="125%" src="https://declaredesign.org/images/brand.svg"></a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Software
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/randomizr/">randomizr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/estimatr/">estimatr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Help</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/getting_started.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting started with fabricatr</a>
    </li>
    <li>
      <a href="../articles/building_importing.html">Building and Importing Data</a>
    </li>
    <li>
      <a href="../articles/common_social.html">Common Social Science variables</a>
    </li>
    <li>
      <a href="../articles/cross_classified.html">Panel and Cross-classified data</a>
    </li>
    <li>
      <a href="../articles/resampling.html">Resampling data with fabricatr</a>
    </li>
    <li>
      <a href="../articles/time_series.html">Time series data with fabricatr</a>
    </li>
    <li>
      <a href="../articles/variable_generation.html">Generating discrete random variables with fabricatr</a>
    </li>
    <li>
      <a href="../articles/other_packages.html">Using other data generating packages with fabricatr</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced features</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://declaredesign.org/r/fabricatr/">fabricatr home</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->




      

      </header><script src="advanced_features_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Advanced features</h1>
                        <h4 class="author">Aaron Rudkin</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DeclareDesign/fabricatr/blob/master/../vignettes/advanced_features.Rmd"><code>../vignettes/advanced_features.Rmd</code></a></small>
      <div class="hidden name"><code>advanced_features.Rmd</code></div>

    </div>

    
    
<div id="more-complicated-level-creation-with-variable-numbers-of-observations" class="section level1">
<h1 class="hasAnchor">
<a href="#more-complicated-level-creation-with-variable-numbers-of-observations" class="anchor"></a>More complicated level creation with variable numbers of observations</h1>
<p><code><a href="../reference/fabricate.html">add_level()</a></code> can be used to create more complicated patterns of nesting. For example, when creating lower level data, it is possible to use a different <code>N</code> for each of the values of the higher level data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">variable_data</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,
    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="va">variable_data</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1778</td>
<td align="left">1</td>
<td align="right">46</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1778</td>
<td align="left">2</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">3</td>
<td align="right">35</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">4</td>
<td align="right">65</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">5</td>
<td align="right">34</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">6</td>
<td align="right">23</td>
</tr>
</tbody>
</table>
<p>Here, each city has a different number of citizens. And the value of <code>N</code> used to create the age variable automatically updates as needed. The result is a dataset with 6 citizens, 2 in the first city and 4 in the second. As long as N is either a number, or a vector of the same length of the current lowest level of the data, <code><a href="../reference/fabricate.html">add_level()</a></code> will know what to do.</p>
<p>It is also possible to provide a function to N, enabling a <em>random</em> number of citizens per city:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,
    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, size <span class="op">=</span> <span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="va">my_data</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1850</td>
<td align="left">1</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1850</td>
<td align="left">2</td>
<td align="right">55</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">3</td>
<td align="right">45</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">4</td>
<td align="right">42</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">5</td>
<td align="right">47</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">6</td>
<td align="right">69</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">7</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">8</td>
<td align="right">18</td>
</tr>
</tbody>
</table>
<p>Here, each city is given a random number of citizens between 1 and 6. Since the <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> function returns a vector of length 2, this is like specifying 2 separate <code>N</code>s as in the example above.</p>
<p>It is also possible to define <code>N</code> on the basis of higher level variables themselves. Consider the following example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">variable_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
  cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5</span>, population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">10</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span>,
  citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">population</span> <span class="op">*</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">population</th>
<th align="left">citizens</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">001</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">002</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">003</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">004</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">005</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">006</td>
</tr>
</tbody>
</table>
<p>Here, the city has a defined population, and the number of citizens in our simulated data reflects a sample of 30% of that population. Although we only display the first 6 rows for brevity’s sake, the first city would have 27 rows in total.</p>
<p>Finally, relying on the ID label from the higher level, it is also possible to define <code>N</code> on the basis of the higher level’s length:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_inherit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
  cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5</span>, population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">10</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span>,
  citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Here, each city has a random number of citizens from 1 to 10, but we need to supply the length of the higher level’s variable (in this case, the ID label <code>cities</code>) to the sample function to ensure that one draw is made per city.</p>
</div>
<div id="correlated-variables-with-custom-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#correlated-variables-with-custom-functions" class="anchor"></a>Correlated variables with custom functions</h1>
<p>Some users might be implemented in drawing correlated variables generated by functions not amongst the default <code>R</code> statistical distributions or those functions supplied by <strong>fabricatr</strong>. Any function can be made to work with <code><a href="../reference/correlate.html">correlate()</a></code> provided it accepts an argument called <code>quantile_y</code> which will pass a series of quantiles to draw from the distribution of interest.</p>
<p>As an example, you might have some external data that represents an empirical distribution you wish to draw from. Here we use actual county level vote data from the 2016 US presidential election to generate a vote share correlated with</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load external data: Thanks to Tony McGovern, https://github.com/tonmcg</span>
<span class="va">county_level_2016_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html">url</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/tonmcg/County_Level_Election_Results_12-16/master/2016_US_County_Level_Presidential_Results.csv"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Function that takes quantile_y and maps to the empirical quantiles of dataset</span>
<span class="va">custom_quantile</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">quantile_y</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ecdf.html">ecdf</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">(</span><span class="va">quantile_y</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Traditional fabricate() call:</span>
<span class="va">county_vote_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
  N <span class="op">=</span> <span class="fl">500</span>,
  poverty_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, min <span class="op">=</span> <span class="fl">0.01</span>, max <span class="op">=</span> <span class="fl">0.40</span><span class="op">)</span>,
  dem_vote <span class="op">=</span> <span class="fu"><a href="../reference/correlate.html">correlate</a></span><span class="op">(</span><span class="va">custom_quantile</span>, 
                       data <span class="op">=</span> <span class="va">county_level_2016_results</span><span class="op">$</span><span class="va">per_dem</span>,
                       given <span class="op">=</span> <span class="va">poverty_rate</span>, 
                       rho <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">county_vote_data</span><span class="op">$</span><span class="va">dem_vote</span>, <span class="va">county_vote_data</span><span class="op">$</span><span class="va">poverty_rate</span>, method<span class="op">=</span><span class="st">"spearman"</span><span class="op">)</span></code></pre></div>
<p>0.34</p>
</div>
<div id="tidyverse-integration" class="section level1">
<h1 class="hasAnchor">
<a href="#tidyverse-integration" class="anchor"></a>Tidyverse integration</h1>
<p>Because the functions in <strong>fabricatr</strong> take data and return data, they are cross-compatible with a <code>tidyverse</code> workflow. Here is an example of using <strong>magrittr</strong>’s pipe operator (<code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code>) and <strong>dplyr</strong>’s <code>group_by</code> and <code>mutate</code> verbs to add new data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="va">my_data</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>
    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,
    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pop <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">my_data</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
<th align="right">pop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1988</td>
<td align="left">1</td>
<td align="right">47</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1988</td>
<td align="left">2</td>
<td align="right">32</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">3</td>
<td align="right">60</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">4</td>
<td align="right">66</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">5</td>
<td align="right">52</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>It is also possible to use the pipe operator (<code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code>) to direct the flow of data between <code><a href="../reference/fabricate.html">fabricate()</a></code> calls. Remember that every <code><a href="../reference/fabricate.html">fabricate()</a></code> call can import existing data frames, and every call returns a single data frame.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/deprecated.html">data_frame</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>lower_level <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">3</span>, Y2 <span class="op">=</span> <span class="va">Y</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: `data_frame()` was deprecated in tibble 1.1.0.
## Please use `tibble()` instead.</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Y</th>
<th align="left">lower_level</th>
<th align="right">Y2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">10</td>
<td align="left">1</td>
<td align="right">9.2</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">2</td>
<td align="right">9.8</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="left">3</td>
<td align="right">9.6</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">4</td>
<td align="right">4.8</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">5</td>
<td align="right">5.2</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">6</td>
<td align="right">4.3</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Aaron Rudkin, Neal Fultz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
