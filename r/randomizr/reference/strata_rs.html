<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Stratified Random Sampling — strata_rs • randomizr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Stratified Random Sampling — strata_rs" />
<meta property="og:description" content="strata_rs implements a random sampling procedure in which units that are grouped into strata defined by covariates are sample using complete random sampling within stratum For example, imagine that 50 of 100 men are sampled and 75 of 200 women are sampled." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="https://declaredesign.org"><img height = 125% width = 125% src = "https://declaredesign.org/images/brand.svg"></a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="http://discuss.declaredesign.org">Ask for Help</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/randomizr/">randomizr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/fabricatr/">fabricatr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/estimatr/">estimatr</a>
    </li>
    <li>
      <a href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://declaredesign.org/r/randomizr/">randomizr home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/randomizr_vignette.html">Getting started with randomizr</a>
    </li>
    <li>
      <a href="../articles/srandomizr_vignette.html">Getting started with randomizr for Stata</a>
    </li>
  </ul>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Stratified Random Sampling</h1>
    <small class="dont-index">Source: <a href='https://github.com/DeclareDesign/randomizr/blob/master/R/strata_rs.R'><code>R/strata_rs.R</code></a></small>
    <div class="hidden name"><code>strata_rs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>strata_rs implements a random sampling procedure in which units that are grouped into strata defined by covariates are sample using complete random sampling within stratum For example, imagine that 50 of 100 men are sampled and 75 of 200 women are sampled.</p>
    </div>

    <pre class="usage"><span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='cn'>NULL</span>, prob <span class='op'>=</span> <span class='cn'>NULL</span>, prob_unit <span class='op'>=</span> <span class='cn'>NULL</span>, n <span class='op'>=</span> <span class='cn'>NULL</span>,
  n_unit <span class='op'>=</span> <span class='cn'>NULL</span>, strata_n <span class='op'>=</span> <span class='cn'>NULL</span>, strata_prob <span class='op'>=</span> <span class='cn'>NULL</span>,
  check_inputs <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>strata</th>
      <td><p>A vector of length N that indicates which stratum each unit belongs to. Can be a character, factor, or numeric vector. (required)</p></td>
    </tr>
    <tr>
      <th>prob</th>
      <td><p>Use for a design in which either floor(N_stratum*prob) or ceiling(N_stratum*prob) units are sampled within each stratum. The probability of  being sampled is exactly prob because with probability 1-prob, floor(N_stratum*prob) units will be sampled and with probability prob, ceiling(N_stratum*prob) units will be sampled. prob must be a real number between 0 and 1 inclusive. (optional)</p></td>
    </tr>
    <tr>
      <th>prob_unit</th>
      <td><p>Must of be of length N. tapply(prob_unit, strata, unique) will be passed to <code>strata_prob</code>.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>Use for a design in which the scalar n describes the fixed number of units to sample in each stratum. This number does not vary across strata.</p></td>
    </tr>
    <tr>
      <th>n_unit</th>
      <td><p>Must be of length N. tapply(m_unit, strata, unique) will be passed to <code>strata_n</code>.</p></td>
    </tr>
    <tr>
      <th>strata_n</th>
      <td><p>Use for a design in which the numeric vector strata_n describes the number of units to sample within each stratum.</p></td>
    </tr>
    <tr>
      <th>strata_prob</th>
      <td><p>Use for a design in which strata_prob describes the probability of being sampled within each stratum. Differs from prob in that the probability of being sampled can vary across strata.</p></td>
    </tr>
    <tr>
      <th>check_inputs</th>
      <td><p>logical. Defaults to TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector of length N that indicates if a unit is sampled (1) or not (0).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>strata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"A"</span>, <span class='st'>"B"</span>,<span class='st'>"C"</span><span class='op'>)</span>, times <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>200</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  25  25
#&gt;      B  50  50
#&gt;      C 100 100</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, prob <span class='op'>=</span> <span class='fl'>.3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  35  15
#&gt;      B  70  30
#&gt;      C 140  60</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  30  20
#&gt;      B  80  20
#&gt;      C 180  20</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, strata_prob <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.1</span>, <span class='fl'>.2</span>, <span class='fl'>.3</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  45   5
#&gt;      B  80  20
#&gt;      C 140  60</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, 
               prob_unit <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.1</span>, <span class='fl'>.2</span>, <span class='fl'>.3</span><span class='op'>)</span>, times <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>200</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  45   5
#&gt;      B  80  20
#&gt;      C 140  60</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, strata_n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  30  20
#&gt;      B  70  30
#&gt;      C 160  40</div><div class='input'>
<span class='va'>Z</span> <span class='op'>&lt;-</span> <span class='fu'>strata_rs</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>strata</span>, 
               n_unit <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span><span class='op'>)</span>, times <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>200</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>strata</span>, <span class='va'>Z</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       Z
#&gt; strata   0   1
#&gt;      A  30  20
#&gt;      B  70  30
#&gt;      C 160  40</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Coppock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


